{"ast":null,"code":"var _jsxFileName = \"/Users/ida/VS-codeProjects/1Local-Travel-And-Weather-Dashboard/my-app/src/components/GetGeolocation/Geolocation.tsx\",\n  _s = $RefreshSig$();\nimport { useRef, useEffect } from \"react\";\nimport { useWeatherStore } from \"../Weather/weatherStore\";\nimport { useTrafficStore } from \"../../store/useTrafficStore\";\nimport { useLocationStore } from \"../../store/useLocationStore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GeolocationApp = () => {\n  _s();\n  const {\n    fetchWeather\n  } = useWeatherStore(); // add\n  const {\n    location,\n    address,\n    setLocation,\n    setAddress\n  } = useLocationStore();\n  const {\n    fetchTrafficUpdates\n  } = useTrafficStore();\n  const inputRef = useRef(null);\n  useEffect(() => {\n    if (location) {\n      // console.log(\"Location updated, fetching traffic updates...\");\n      fetchTrafficUpdates();\n      fetchWeather(location.latitude, location.longitude); // add\n    }\n  }, [location, fetchTrafficUpdates, fetchWeather]); // added fetchTrafficUpdates and fetchWeather\n\n  const getLocation = async () => {\n    if (address.trim() === \"\") {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(({\n          coords: {\n            latitude,\n            longitude\n          }\n        }) => {\n          setLocation({\n            latitude,\n            longitude\n          });\n          fetchTrafficUpdates();\n          fetchWeather(latitude, longitude); // add\n        }, () => console.error(\"Unable to retrieve location.\"));\n      } else {\n        console.error(\"Geolocation is not supported.\");\n      }\n    } else {\n      try {\n        const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(address)}`);\n        const [location] = await response.json();\n        if (location) {\n          const {\n            lat,\n            lon\n          } = location;\n          setLocation({\n            latitude: parseFloat(lat),\n            longitude: parseFloat(lon)\n          });\n          setAddress(\"\");\n          fetchTrafficUpdates();\n          fetchWeather(lat, lon); // add\n        } else {\n          console.error(\"Location not found for address:\", address);\n        }\n      } catch (error) {\n        console.error(\"Error fetching location for address:\", error);\n      }\n    }\n  };\n\n  // REPLACED WITH useLocationStore\n\n  // const [location, setLocation] = useState<string>('');\n  //  const [address, setAddress] = useState<string>('');\n  //  const inputRef = useRef<HTMLInputElement>(null);\n\n  //  const getLocation = async () => {\n  //   if (address.trim() === '') {\n  //  if (navigator.geolocation) {\n  //  navigator.geolocation.getCurrentPosition(\n  //   (position) => {\n  //  const latitude = position.coords.latitude;\n  //  const longitude = position.coords.longitude;\n\n  //  setLocation(`Latitude: ${latitude}, Longitude: ${longitude}`);\n  //  fetchWeather(latitude, longitude);\n  //   },\n  //   () => {\n  //  setLocation('Unable to retrieve location.');\n  //   }\n  //   );\n  // } else {\n  //   setLocation('Geolocation is not supported by this browser.');\n  //   }\n  //   } else {\n  //  try {\n  //  const response = await fetch(\n  //  `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(\n  //  address\n  //  )}`\n  //   );\n  //   const data = await response.json();\n\n  //  if (data.length > 0) {\n  // const { lat, lon } = data[0];\n  // setLocation(\n  // `Your Location is ${address} üëâüèª Latitude: ${lat}, Longitude: ${lon}`\n  //  );\n  //  fetchWeather(parseFloat(lat), parseFloat(lon));\n\n  // if (inputRef.current) {\n  // inputRef.current.value = '';\n  //  }\n  // setAddress('');\n  //  } else {\n  // setLocation('Location not found.');\n  //  }\n  // } catch {\n  //  setLocation('Error fetching location.');\n  //  }\n  //  }\n  //  };\n\n  //  return (\n  //   <div className=\"d-flex flex-column align-items-center justify-content-center min-vh-100 bg-light text-center p-4\">\n\n  //   {/* Search Input with Button */}\n  //  <div\n  //  className=\"input-group mb-3\"\n  //  style={{ maxWidth: '500px', width: '100%' }}\n  //  >\n  //   <input\n  //  ref={inputRef}\n  // type=\"text\"\n  // placeholder=\"Search for a location...\"\n  // value={address}\n  // onChange={(e) => setAddress(e.target.value)}\n  // className=\"form-control border-primary shadow-sm\"\n  // />\n  // <button onClick={getLocation} className=\"mt-3 btn btn-primary\">\n  //  Get Location\n  // </button>\n  // </div>\n  // {/* Display Location */}\n  // <p className=\"mt-3\">{location}</p>\n  // </div>\n  //  );\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      ref: inputRef,\n      type: \"text\",\n      placeholder: \"Search for a location...\",\n      value: address,\n      onChange: e => setAddress(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: getLocation,\n      children: \"Get Location\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: location ? `Latitude: ${location.latitude}, Longitude: ${location.longitude}` : \"No location available\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 5\n  }, this);\n};\n_s(GeolocationApp, \"urExRUaHwe+5W2buc4f04li6xvs=\", false, function () {\n  return [useWeatherStore, useLocationStore, useTrafficStore];\n});\n_c = GeolocationApp;\nexport default GeolocationApp;\nvar _c;\n$RefreshReg$(_c, \"GeolocationApp\");","map":{"version":3,"names":["useRef","useEffect","useWeatherStore","useTrafficStore","useLocationStore","jsxDEV","_jsxDEV","GeolocationApp","_s","fetchWeather","location","address","setLocation","setAddress","fetchTrafficUpdates","inputRef","latitude","longitude","getLocation","trim","navigator","geolocation","getCurrentPosition","coords","console","error","response","fetch","encodeURIComponent","json","lat","lon","parseFloat","children","ref","type","placeholder","value","onChange","e","target","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["/Users/ida/VS-codeProjects/1Local-Travel-And-Weather-Dashboard/my-app/src/components/GetGeolocation/Geolocation.tsx"],"sourcesContent":["import { useState, useRef, useEffect } from \"react\";\nimport { useWeatherStore } from \"../Weather/weatherStore\";\nimport { useTrafficStore } from \"../../store/useTrafficStore\";\nimport { useLocationStore } from \"../../store/useLocationStore\";\n\nconst GeolocationApp: React.FC = () => {\n  const { fetchWeather } = useWeatherStore(); // add\n  const { location, address, setLocation, setAddress } = useLocationStore();\n  const { fetchTrafficUpdates } = useTrafficStore();\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (location) {\n      // console.log(\"Location updated, fetching traffic updates...\");\n      fetchTrafficUpdates();\n      fetchWeather(location.latitude, location.longitude); // add\n    }\n  }, [location, fetchTrafficUpdates, fetchWeather]); // added fetchTrafficUpdates and fetchWeather\n\n  const getLocation = async () => {\n    if (address.trim() === \"\") {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(\n          ({ coords: { latitude, longitude } }) => {\n            setLocation({ latitude, longitude });\n            fetchTrafficUpdates();\n            fetchWeather(latitude, longitude); // add\n          },\n          () => console.error(\"Unable to retrieve location.\")\n        );\n      } else {\n        console.error(\"Geolocation is not supported.\");\n      }\n    } else {\n      try {\n        const response = await fetch(\n          `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(\n            address\n          )}`\n        );\n        const [location] = await response.json();\n        if (location) {\n          const { lat, lon } = location;\n          setLocation({\n            latitude: parseFloat(lat),\n            longitude: parseFloat(lon),\n          });\n          setAddress(\"\");\n          fetchTrafficUpdates();\n          fetchWeather(lat, lon); // add\n        } else {\n          console.error(\"Location not found for address:\", address);\n        }\n      } catch (error) {\n        console.error(\"Error fetching location for address:\", error);\n      }\n    }\n  };\n\n  // REPLACED WITH useLocationStore\n\n  // const [location, setLocation] = useState<string>('');\n  //  const [address, setAddress] = useState<string>('');\n  //  const inputRef = useRef<HTMLInputElement>(null);\n\n  //  const getLocation = async () => {\n  //   if (address.trim() === '') {\n  //  if (navigator.geolocation) {\n  //  navigator.geolocation.getCurrentPosition(\n  //   (position) => {\n  //  const latitude = position.coords.latitude;\n  //  const longitude = position.coords.longitude;\n\n  //  setLocation(`Latitude: ${latitude}, Longitude: ${longitude}`);\n  //  fetchWeather(latitude, longitude);\n  //   },\n  //   () => {\n  //  setLocation('Unable to retrieve location.');\n  //   }\n  //   );\n  // } else {\n  //   setLocation('Geolocation is not supported by this browser.');\n  //   }\n  //   } else {\n  //  try {\n  //  const response = await fetch(\n  //  `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(\n  //  address\n  //  )}`\n  //   );\n  //   const data = await response.json();\n\n  //  if (data.length > 0) {\n  // const { lat, lon } = data[0];\n  // setLocation(\n  // `Your Location is ${address} üëâüèª Latitude: ${lat}, Longitude: ${lon}`\n  //  );\n  //  fetchWeather(parseFloat(lat), parseFloat(lon));\n\n  // if (inputRef.current) {\n  // inputRef.current.value = '';\n  //  }\n  // setAddress('');\n  //  } else {\n  // setLocation('Location not found.');\n  //  }\n  // } catch {\n  //  setLocation('Error fetching location.');\n  //  }\n  //  }\n  //  };\n\n  //  return (\n  //   <div className=\"d-flex flex-column align-items-center justify-content-center min-vh-100 bg-light text-center p-4\">\n\n  //   {/* Search Input with Button */}\n  //  <div\n  //  className=\"input-group mb-3\"\n  //  style={{ maxWidth: '500px', width: '100%' }}\n  //  >\n  //   <input\n  //  ref={inputRef}\n  // type=\"text\"\n  // placeholder=\"Search for a location...\"\n  // value={address}\n  // onChange={(e) => setAddress(e.target.value)}\n  // className=\"form-control border-primary shadow-sm\"\n  // />\n  // <button onClick={getLocation} className=\"mt-3 btn btn-primary\">\n  //  Get Location\n  // </button>\n  // </div>\n  // {/* Display Location */}\n  // <p className=\"mt-3\">{location}</p>\n  // </div>\n  //  );\n\n  return (\n    <div>\n      <input\n        ref={inputRef}\n        type=\"text\"\n        placeholder=\"Search for a location...\"\n        value={address}\n        onChange={(e) => setAddress(e.target.value)}\n      />\n      <button onClick={getLocation}>Get Location</button>\n      <p>\n        {location\n          ? `Latitude: ${location.latitude}, Longitude: ${location.longitude}`\n          : \"No location available\"}\n      </p>\n    </div>\n  );\n};\nexport default GeolocationApp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}